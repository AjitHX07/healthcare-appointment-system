<section class="appointment-form-container">
    <h2>{{ isEdit ? 'Edit Appointment' : 'Add Appointment' }}</h2>

    <div *ngIf="successMessage" class="message success">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="message error">{{ errorMessage }}</div>

    <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="patientId">Patient Name</label>
            <select id="patientId" formControlName="patientId">
                <option *ngFor="let patient of patients" [value]="patient.id">{{ patient.name }}</option>
            </select>
            <div *ngIf="appointmentForm.get('patientId')?.invalid && appointmentForm.get('patientId')?.touched"
                class="error">
                Patient is required.
            </div>
        </div>

        <div class="form-group">
            <label for="doctor">Doctor Name</label>
            <input id="doctor" formControlName="doctor" type="text" placeholder="Enter Doctor Name" />
            <div *ngIf="appointmentForm.get('doctor')?.invalid && appointmentForm.get('doctor')?.touched" class="error">
                Doctor is required.
            </div>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input id="date" formControlName="date" type="date" />
            <div *ngIf="appointmentForm.get('date')?.invalid && appointmentForm.get('date')?.touched" class="error">
                Date is required.
            </div>
        </div>

        <div class="form-group">
            <label for="time">Time</label>
            <input id="time" formControlName="time" type="time" />
            <div *ngIf="appointmentForm.get('time')?.invalid && appointmentForm.get('time')?.touched" class="error">
                Time is required.
            </div>
        </div>

        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status">
                <option value="Pending">Pending</option>
                <option value="Confirmed">Confirmed</option>
            </select>
        </div>

        <div class="form-actions">
            <button type="submit" class="button button--primary">{{ isEdit ? 'Update' : 'Save' }}</button>
            <button routerLink="/appointments" class="button button--secondary">Cancel</button>
        </div>
    </form>
</section>